import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.BVOCwoKb.js";import{r as N,a as C}from"./movieUtils.BzFiPXDS.js";function S({movies:h=[],title:a="Phim Lẻ Mới"}){const i=d.useRef(null),[m,p]=d.useState(!1),[u,x]=d.useState(!0),v=8,s=()=>{const t=i.current;if(!t)return;const l=t.scrollWidth>t.clientWidth,r=Math.ceil(t.scrollWidth-t.clientWidth);l?(p(t.scrollLeft>5),x(t.scrollLeft<r-5)):(p(!1),x(!1))};d.useEffect(()=>{const t=i.current;if(!t)return;s(),t.addEventListener("scroll",s),window.addEventListener("resize",s);const l=new MutationObserver(s);return l.observe(t,{childList:!0,subtree:!0,attributes:!0}),()=>{t.removeEventListener("scroll",s),window.removeEventListener("resize",s),l.disconnect()}},[h]);const g=t=>{const l=i.current;if(!l)return;const r=l.querySelector(".movie-card-item");if(!r){const c=l.clientWidth;l.scrollBy({left:t==="left"?-c:c,behavior:"smooth"});return}const n=r.offsetWidth+v,o=t==="left"?-n:n;l.scrollBy({left:o,behavior:"smooth"})};return h.length===0?null:e.jsxs("section",{className:"relative py-1 lg:py-4 ","aria-labelledby":`${a.replace(/\s+/g,"-")}-heading`,children:[e.jsx("div",{className:"mb-4",children:e.jsx("h2",{id:`${a.replace(/\s+/g,"-")}-heading`,className:"mb-0 text-lg font-bold text-white lg:text-2xl",children:a})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:i,className:"no-scrollbar flex snap-x snap-mandatory gap-3 overflow-x-auto scroll-smooth",children:h.map((t,l)=>{const{id:r,slug:n,name:o,thumb_url:c,year:L,episode_current:f,lang:b,origin_name:w}=t,y=`https://ik.imagekit.io/17mpki7mv/motchill/${c}?tr=f-webp,w-800,h-450,fo-auto,q-85`,j=r||n||`movie-${l}`;return e.jsxs("a",{href:`/phim/${n}`,title:o,className:"movie-card-item group movie-card","aria-label":`Xem phim ${o}`,children:[e.jsxs("div",{className:"relative aspect-[16/9] w-full overflow-hidden rounded-md",children:[e.jsx("img",{src:y,alt:`Poster phim ${o}`,className:"h-full w-full object-cover brightness-100",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 rounded-[4px] bg-black/20 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100",children:e.jsxs("svg",{viewBox:"0 0 60 60",className:"h-[30px] w-[30px]",children:[e.jsx("circle",{cx:"30",cy:"30",r:"30",className:"fill-[#FFDE8A]"}),e.jsx("path",{d:"M35.746,22.494 L45.14,36.586 C46.059,37.964 45.687,39.827 44.308,40.746 C43.815,41.074 43.236,41.25 42.644,41.25 L23.855,41.25 C22.198,41.25 20.855,39.906 20.855,38.25 C20.855,37.657 21.03,37.078 21.359,36.586 L30.753,22.494 C31.672,21.116 33.535,20.743 34.914,21.662 C35.243,21.882 35.526,22.165 35.746,22.494 Z",fill:"#000000",transform:"translate(33.25, 30) rotate(-270) translate(-33.25, -30)"})]})}),e.jsxs("div",{className:"absolute bottom-2 lg:bottom-0 left-2 lg:left-1/2 transform -translate-x-0 lg:-translate-x-1/2 flex flex-col lg:flex-row z-20 text-[10px] lg:text-[11px] font-semibold leading-tight text-white gap-1 lg:gap-0",children:[e.jsx("span",{className:"whitespace-nowrap px-2 py-0.5 lg:py-1 rounded-md lg:rounded-none lg:rounded-tl-md bg-[#5e6070]","aria-label":`Tình trạng phim: ${f}`,children:N(f)}),e.jsx("span",{className:"whitespace-nowrap w-fit px-2 py-0.5 lg:py-1 rounded-md lg:rounded-none lg:rounded-tr-md bg-[#2ca35d]","aria-label":`Ngôn ngữ phim: ${b}`,children:C(b)})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"line-clamp-1 text-[13px] font-semibold text-white group-hover:text-[#FFDE8A]",children:o}),e.jsx("p",{className:"line-clamp-1 text-xs font-semibold text-gray-400 mt-1",children:w})]})]},j)})}),e.jsx("button",{onClick:()=>g("left"),className:`absolute left-0 z-30 top-12 hidden sm:flex md:top-16 lg:top-20 xl:top-12 h-8 w-8 items-center justify-center transition-opacity duration-300 py-0.5 hover:scale-110 cursor-pointer ${m?"opacity-100":"opacity-0 pointer-events-none"} sm:block hidden`,"aria-label":`Cuộn trái phần ${a}`,disabled:!m,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",className:"drop-shadow-[0_0_12px_rgba(255,255,255,0.7)] text-gray-100",children:e.jsx("path",{fill:"currentColor",d:"M7.94 13.06a1.5 1.5 0 0 1 0-2.12l5.656-5.658a1.5 1.5 0 1 1 2.121 2.122L11.122 12l4.596 4.596a1.5 1.5 0 1 1-2.12 2.122l-5.66-5.658Z"})})}),e.jsx("button",{onClick:()=>g("right"),className:`absolute right-0 z-30 hidden sm:flex md:top-16 lg:top-20 xl:top-12  h-8 w-8 items-center justify-center transition-opacity duration-300 py-0.5 hover:scale-110 cursor-pointer ${u?"opacity-100":"opacity-0 pointer-events-none"} sm:block hidden`,"aria-label":`Cuộn phải phần ${a}`,disabled:!u,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",className:"drop-shadow-[0_0_12px_rgba(255,255,255,0.7)] text-gray-100",children:e.jsx("path",{fill:"currentColor",d:"M16.06 10.94a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 1 1-2.121-2.122L12.879 12L8.283 7.404a1.5 1.5 0 0 1 2.12-2.122l5.658 5.657Z"})})})]})]})}export{S as default};
