import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as f}from"./index.BVOCwoKb.js";const O={src:"/_astro/eposide.CaavVmCT.gif"},U=({vietsub:t=[],thuyetminh:s=[],longtieng:n=[],movieTitle:l="",slug:r,currentEpisodeSlug:i="",currentType:a="",totalEpisodes:o=0})=>{const h=t.length>0,c=s.length>0,x=n.length>0,[d,m]=f.useState((()=>a||(h?"vietsub":c?"thuyetminh":x?"longtieng":""))),[g,u]=f.useState(!1),[p,b]=f.useState("");if(f.useEffect((()=>{a&&m(a)}),[a]),!h&&!c&&!x&&0===parseInt(o))return null;const w=e=>1===e.length&&("full"===e[0].slug||e[0].name?.toLowerCase().includes("full")),y=h&&w(t),v=c&&w(s),j=x&&w(n),T=y||v||j,N=(e,t)=>{if(w(e))return e;const s=parseInt(t);if(isNaN(s)||s<=0)return e;const n=[...e],l=new Set(e.map((e=>{const t=e.name?.match(/Tập (\d+)/);return t?parseInt(t[1]):null})).filter((e=>null!==e)));for(let e=1;e<=s;e++)l.has(e)||n.push({name:`Tập ${String(e).padStart(2,"0")}`,slug:`tap-${String(e).padStart(2,"0")}`,link_embed:null,link_m3u8:null});return n.sort(((e,t)=>parseInt(e.name.match(/Tập (\d+)/)?.[1]||0)-parseInt(t.name.match(/Tập (\d+)/)?.[1]||0))),n},k=h?N(t,o):[],C=c?N(s,o):[],M=x?N(n,o):[],z=f.useMemo((()=>{let e=[];switch(d){case"vietsub":e=k;break;case"thuyetminh":e=C;break;case"longtieng":e=M;break;default:e=[]}if(!p)return e;const t=p.toLowerCase();return e.filter((e=>e.name?.toLowerCase().includes(t)||e.slug?.toLowerCase().includes(t)))}),[d,p,k,C,M]),$=p||g?z:z.slice(0,40),A=z.length>40,S=(t,s)=>e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"grid grid-cols-4 gap-2 md:grid-cols-8 lg:grid-cols-8 xl:grid-cols-8",children:t.map((t=>((t,s)=>{const n=t.slug,o=t.name,h=null!==t.link_embed||null!==t.link_m3u8,c=h?`/xem-phim/${r}/${n}/${s}`:"#",x=!T&&i&&a&&n===i&&s===a&&h;return e.jsx("a",{href:c,className:"relative truncate line-clamp-1 flex items-center justify-center rounded-md px-6 py-3 text-center text-[13px] font-semibold transition-colors duration-200  "+(x?"bg-[#FFD875] shadow-lg text-gray-900":h?"bg-[#23252b] text-gray-200 hover:text-[#FFD875]":"bg-[#23252b] text-gray-500 cursor-not-allowed"),title:`${o} - ${l} (${(e=>{switch(e){case"vietsub":return"Vietsub";case"thuyetminh":return"Thuyết Minh";case"longtieng":return"Lồng Tiếng";default:return""}})(s)})`,onClick:e=>!h&&e.preventDefault(),children:x?e.jsx("img",{src:O.src,alt:"Đang phát",className:"h-4 w-auto",style:{filter:"brightness(0) saturate(100%)"}}):o},`${n}-${s}`)})(t,s)))})});return e.jsxs("div",{className:"z-20 space-y-4 py-2 lg:px-0 lg:py-4",children:[e.jsxs("h2",{className:"flex flex-col lg:flex-row text-base gap-4 font-medium text-white lg:text-xl justify-between",children:[e.jsxs("div",{className:"flex flex-row justify-between lg:gap-6 ",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M5 19q-.425 0-.712-.288T4 18t.288-.712T5 17h8q.425 0 .713.288T14 18t-.288.713T13 19zm0-4q-.425 0-.712-.288T4 14t.288-.712T5 13h14q.425 0 .713.288T20 14t-.288.713T19 15zm0-4q-.425 0-.712-.288T4 10t.288-.712T5 9h14q.425 0 .713.288T20 10t-.288.713T19 11zm0-4q-.425 0-.712-.288T4 6t.288-.712T5 5h14q.425 0 .713.288T20 6t-.288.713T19 7z"})}),e.jsx("span",{children:"Tập Phim"})]}),!T&&e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx((()=>e.jsx("svg",{width:"1",height:"32",viewBox:"0 0 1 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-600 mx-2 hidden lg:block",children:e.jsx("path",{d:"M1 0V32",stroke:"currentColor",strokeWidth:"2"})})),{}),h&&e.jsxs("button",{className:"flex items-center gap-1 rounded-md px-2 py-1 text-xs font-semibold transition-colors duration-200 "+("vietsub"===d?"border-white border text-white":"text-gray-200 hover:text-white"),onClick:()=>m("vietsub"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"currentColor",d:"M1 5.5A2.5 2.5 0 0 1 3.5 3h9A2.5 2.5 0 0 1 15 5.5v5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 10.5zM3.5 4A1.5 1.5 0 0 0 2 5.5v5A1.5 1.5 0 0 0 3.5 12h9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 12.5 4zM3 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 1.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zM10 8.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5M8.5 10a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"})}),"Phụ đề"]}),c&&e.jsxs("button",{className:"flex items-center gap-1 rounded-md px-2 py-1 text-xs font-semibold transition-colors duration-200 "+("thuyetminh"===d?"border-white border text-white":"text-gray-200 hover:text-white"),onClick:()=>m("thuyetminh"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"currentColor",d:"M1 5.5A2.5 2.5 0 0 1 3.5 3h9A2.5 2.5 0 0 1 15 5.5v5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 10.5zM3.5 4A1.5 1.5 0 0 0 2 5.5v5A1.5 1.5 0 0 0 3.5 12h9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 12.5 4zM3 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 1.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zM10 8.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5M8.5 10a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"})}),"Thuyết minh"]}),x&&e.jsx("button",{className:"flex items-center gap-1 rounded-md px-2 py-1 text-xs font-semibold transition-colors duration-200 "+("longtieng"===d?"border-white border text-white":"text-gray-200 hover:text-white"),onClick:()=>m("longtieng"),children:"Lồng Tiếng"})]})]}),!T&&e.jsx("div",{className:"flex items-center gap-4 flex-wrap ml-auto",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Tìm tập phim...",value:p,onChange:e=>b(e.target.value),className:"bg-[#23252b] text-gray-200 placeholder-gray-500 rounded-md py-1.5 pl-3 text-xs focus:outline-none "}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"absolute right-2 text-gray-500",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})]})})]}),T?e.jsxs("div",{className:"flex flex-wrap gap-3",children:[y&&e.jsx("a",{href:`/xem-phim/${r}/full/vietsub`,className:"rounded-lg px-3 py-2 text-sm font-semibold transition-colors duration-200 "+("vietsub"===a&&"full"===i?"bg-[#23252b] text-[#ffd785]":"bg-[#23252b] text-gray-200 "),children:"Xem Phụ Đề"}),v&&e.jsx("a",{href:`/xem-phim/${r}/full/thuyetminh`,className:"rounded-lg px-3 py-2 text-sm font-semibold transition-colors duration-200 "+("thuyetminh"===a&&"full"===i?"bg-[#23252b] text-[#ffd785]":"bg-[#23252b] text-gray-200"),children:"Xem Thuyết Minh"}),j&&e.jsx("a",{href:`/xem-phim/${r}/full/longtieng`,className:"rounded-lg px-3 py-2 text-sm font-semibold transition-colors duration-200 "+("longtieng"===a&&"full"===i?"bg-[#23252b] text-[#ffd785] ":"bg-[#23252b] text-gray-200 "),children:"Xem Lồng Tiếng"})]}):e.jsxs(e.Fragment,{children:["vietsub"===d&&h&&S($,"vietsub"),"thuyetminh"===d&&c&&S($,"thuyetminh"),"longtieng"===d&&x&&S($,"longtieng"),A&&!p&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>u(!g),className:"px-6 py-3 text-sm font-medium text-black bg-gradient-to-br from-[#FECF59] to-[#FFF1CC] rounded-full transition-all duration-200 ease-in-out hover:shadow-lg",children:g?"Thu gọn":`Xem thêm (${z.length-40} tập)`})}),0===z.length&&p&&e.jsxs("p",{className:"text-gray-500 text-center text-sm mt-6 italic",children:['Không tìm thấy tập phim nào phù hợp với từ khóa "',p,'".']}),0===z.length&&!p&&e.jsx("p",{className:"text-gray-500 text-center text-sm mt-6 italic",children:"Hiện tại chưa có tập phim nào cho loại này."})]}),e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"TVSeries",name:l,numberOfEpisodes:parseInt(o)||0})}})]})};export{U as default};