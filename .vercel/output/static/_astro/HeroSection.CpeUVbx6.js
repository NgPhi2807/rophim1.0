import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.BVOCwoKb.js";import{g as W}from"./_commonjsHelpers.Cpj98o6Y.js";import{b as S,a as q}from"./movieUtils.BzFiPXDS.js";import{A as H,m as Q}from"./proxy.ordYrxt9.js";var O,j,L,k={};function X(){if(O)return k;O=1,k.match=function(e,t){return s(e).some((function(e){var r=e.inverse,n="all"===e.type||t.type===e.type;if(n&&r||!n&&!r)return!1;var a=e.expressions.every((function(e){var r=e.feature,n=e.modifier,a=e.value,s=t[r];if(!s)return!1;switch(r){case"orientation":case"scan":return s.toLowerCase()===a.toLowerCase();case"width":case"height":case"device-width":case"device-height":a=o(a),s=o(s);break;case"resolution":a=l(a),s=l(s);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":a=i(a),s=i(s);break;case"grid":case"color":case"color-index":case"monochrome":a=parseInt(a,10)||1,s=parseInt(s,10)||0}switch(n){case"min":return s>=a;case"max":return s<=a;default:return s===a}}));return a&&!r||!a&&r}))},k.parse=s;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,r=/^(?:(min|max)-)?(.+)/,n=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function s(n){return n.split(",").map((function(n){var a=(n=n.trim()).match(e),s=a[1],i=a[2],l=a[3]||"",o={};return o.inverse=!!s&&"not"===s.toLowerCase(),o.type=i?i.toLowerCase():"all",l=l.match(/\([^\)]+\)/g)||[],o.expressions=l.map((function(e){var n=e.match(t),a=n[1].toLowerCase().match(r);return{modifier:a[1],feature:a[2],value:n[2]}})),o}))}function i(e){var t,r=Number(e);return r||(r=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),r}function l(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function o(e){var t=parseFloat(e);switch(String(e).match(n)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}return k}function V(){if(L)return j;L=1;var e=X().match,t=typeof window<"u"?window.matchMedia:null;function r(r,n,a){var s,i=this;function l(e){i.matches=e.matches,i.media=e.media}t&&!a&&(s=t.call(window,r)),s?(this.matches=s.matches,this.media=s.media,s.addListener(l)):(this.matches=e(r,n),this.media=r),this.addListener=function(e){s&&s.addListener(e)},this.removeListener=function(e){s&&s.removeListener(e)},this.dispose=function(){s&&s.removeListener(l)}}return j=function(e,t,n){return new r(e,t,n)}}var K=V();const G=W(K);var Z=/[A-Z]/g,Y=/^ms-/,R={};function J(e){return"-"+e.toLowerCase()}function z(e){if(R.hasOwnProperty(e))return R[e];var t=e.replace(Z,J);return R[e]=Y.test(t)?"-"+t:t}function B(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),a=r.length;if(n.length!==a)return!1;for(let n=0;n<a;n++){const a=r[n];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var E,D,_,P,$,C={exports:{}};function ee(){if(D)return E;D=1;return E="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function te(){if(P)return _;P=1;var e=ee();function t(){}function r(){}return r.resetWarningCache=t,_=function(){function n(t,r,n,a,s,i){if(i!==e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function a(){return n}n.isRequired=n;var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s}}function re(){return $||($=1,C.exports=te()()),C.exports}var ae=re();const u=W(ae),x=u.oneOfType([u.string,u.number]),F={all:u.bool,grid:u.bool,aural:u.bool,braille:u.bool,handheld:u.bool,print:u.bool,projection:u.bool,screen:u.bool,tty:u.bool,tv:u.bool,embossed:u.bool},ne={orientation:u.oneOf(["portrait","landscape"]),scan:u.oneOf(["progressive","interlace"]),aspectRatio:u.string,deviceAspectRatio:u.string,height:x,deviceHeight:x,width:x,deviceWidth:x,color:u.bool,colorIndex:u.bool,monochrome:u.bool,resolution:x,type:Object.keys(F)},{type:Ce,...se}=ne,oe={minAspectRatio:u.string,maxAspectRatio:u.string,minDeviceAspectRatio:u.string,maxDeviceAspectRatio:u.string,minHeight:x,maxHeight:x,minDeviceHeight:x,maxDeviceHeight:x,minWidth:x,maxWidth:x,minDeviceWidth:x,maxDeviceWidth:x,minColor:u.number,maxColor:u.number,minColorIndex:u.number,maxColorIndex:u.number,minMonochrome:u.number,maxMonochrome:u.number,minResolution:x,maxResolution:x,...se},ie={...F,...oe};var le={all:ie};const ce=e=>`not ${e}`,ue=(e,t)=>{const r=z(e);return"number"==typeof t&&(t=`${t}px`),!0===t?r:!1===t?ce(r):`(${r}: ${t})`},de=e=>e.join(" and "),me=e=>{const t=[];return Object.keys(le.all).forEach((r=>{const n=e[r];null!=n&&t.push(ue(r,n))})),de(t)},he=m.createContext(void 0),pe=e=>e.query||me(e),I=e=>e?Object.keys(e).reduce(((t,r)=>(t[z(r)]=e[r],t)),{}):void 0,A=()=>{const e=m.useRef(!1);return m.useEffect((()=>{e.current=!0}),[]),e.current},fe=e=>{const t=m.useContext(he),r=()=>I(e)||I(t),[n,a]=m.useState(r);return m.useEffect((()=>{const e=r();B(n,e)||a(e)}),[e,t]),n},ge=e=>{const t=()=>pe(e),[r,n]=m.useState(t);return m.useEffect((()=>{const e=t();r!==e&&n(e)}),[e]),r},xe=(e,t)=>{const r=()=>G(e,t||{},!!t),[n,a]=m.useState(r),s=A();return m.useEffect((()=>{if(s){const e=r();return a(e),()=>{e&&e.dispose()}}}),[e,t]),n},be=e=>{const[t,r]=m.useState(e.matches);return m.useEffect((()=>{const t=e=>{r(e.matches)};return e.addListener(t),r(e.matches),()=>{e.removeListener(t)}}),[e]),t},ve=(e,t,r)=>{const n=fe(t),a=ge(e);if(!a)throw new Error("Invalid or missing MediaQuery!");const s=xe(a,n),i=be(s);return A(),m.useEffect((()=>{}),[i]),m.useEffect((()=>()=>{s&&s.dispose()}),[]),i};function ye(e){if(!e)return"";const t=e.indexOf("/upload/");return-1===t?"":`https://ik.imagekit.io/17mpki7mv/motchill/upload/${e.slice(t+8)}?tr=w-1200,h-450,f-webp,fo-auto`}const we={WebkitMaskImage:"\n    linear-gradient(to bottom, rgba(0,0,0,1) 100%, rgba(0,0,0,0) 100%),\n    linear-gradient(to right, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%),\n    linear-gradient(to left, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%)\n  ",maskImage:"\n    linear-gradient(to bottom, rgba(0,0,0,1) 10%, rgba(0,0,0,0) 100%),\n    linear-gradient(to top, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%),\n    linear-gradient(to right, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%),\n    linear-gradient(to left, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%)\n  ",maskComposite:"intersect",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"},Me=7;function Ee({movies:e=[]}){const t=m.useRef(null),[r,n]=m.useState([]),[a,i]=m.useState(0),[l,o]=m.useState(0),[c,u]=m.useState(1);ve({minWidth:1024});const d=m.useRef(0),h=m.useRef(0);m.useEffect((()=>{e&&e.length>0?(n(e),i((t=>Math.min(t,e.length-1)))):(n([]),i(0))}),[e]);const p=r[a],g=m.useCallback((()=>{if(!t.current||0===r.length)return void o(0);let e=r.length;e=Math.min(e,7),o(e)}),[r]);m.useEffect((()=>(g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)})),[g]);const x=m.useCallback((e=>{"left"===e?(u(-1),i((e=>Math.max(0,e-1)))):(u(1),i((e=>Math.min(r.length-1,e+1))))}),[r.length]),f=m.useCallback((e=>{d.current=e.touches[0].clientX}),[]),b=m.useCallback((e=>{h.current=e.touches[0].clientX}),[]),v=m.useCallback((()=>{const e=d.current-h.current;e>75?(u(1),i((e=>Math.min(r.length-1,e+1)))):e<-75&&(u(-1),i((e=>Math.max(0,e-1)))),d.current=0,h.current=0}),[r.length]);if(!p)return null;const y=ye(p.thumb_url);return s.jsx("section",{className:"relative h-auto py-2 lg:px-0 lg:py-0",children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>x("left"),disabled:0===a,className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 hidden lg:block p-2 transition-colors duration-200 hover:scale-110 cursor-pointer","aria-label":"Cuộn trái",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",className:"drop-shadow-[0_0_12px_rgba(255,255,255,0.7)] text-gray-100",children:s.jsxs("g",{fill:"none",fillRule:"evenodd",children:[s.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),s.jsx("path",{fill:"currentColor",d:"M7.94 13.06a1.5 1.5 0 0 1 0-2.12l5.656-5.658a1.5 1.5 0 1 1 2.121 2.122L11.122 12l4.596 4.596a1.5 1.5 0 1 1-2.12 2.122l-5.66-5.658Z"})]})})}),s.jsx("div",{ref:t,className:"no-scrollbar flex snap-x snap-mandatory gap-4 overflow-x-auto scroll-smooth",onTouchStart:f,onTouchMove:b,onTouchEnd:v,children:s.jsxs("div",{className:"group movie-card-item movie-hero-width ",children:[s.jsxs("div",{className:"relative block aspect-[16/9] lg:aspect-[16/7] w-full overflow-hidden rounded-none lg:rounded-[4px]",children:[s.jsx(H,{initial:!1,children:s.jsx(Q.img,{src:y,alt:`Poster phim ${p.name}`,className:"h-full w-full object-cover brightness-110",loading:"lazy",width:"800",height:"450",style:we,initial:{opacity:0,x:100*c},animate:{opacity:1,x:0},exit:{opacity:0,x:-100*c},transition:{duration:.3}},p._id||p.slug)}),s.jsx("div",{className:"hidden md:block absolute inset-0 z-[1] pointer-events-none",style:{backgroundImage:"radial-gradient(rgba(0,0,0,0.1) 0.5px, transparent 0.5px)",backgroundSize:"3px 3px"},"aria-hidden":"true"}),l>1&&s.jsx("div",{className:"absolute bottom-5 lg:bottom-8 lg:right-8 right-5 flex gap-1.5 z-20 ",children:Array.from({length:l}).map(((e,t)=>s.jsx("span",{className:"block h-1 lg:h-1.5 rounded-[1px] lg:rounded-[2px] transition-all duration-300 "+(t===a?"bg-white w-2 lg:w-3":"bg-gray-400 w-1 lg:w-2"),"aria-label":`Slide ${t+1}`,onClick:e=>{e.preventDefault(),u(t>a?1:-1),i(t)}},t)))})]}),s.jsxs("div",{className:"absolute bottom-5 lg:bottom-20 left-4 flex flex-col gap-1 lg:gap-3 text-white z-20 lg:left-16 drop-shadow-[0_20px_20px_rgba(0,0,0,10)]",children:[s.jsx("h2",{className:"line-clamp-1 text-lg lg:text-3xl font-bold ",id:`movie-title-${p.id||p.slug}`,children:s.jsx("a",{href:`/phim/${p.slug}`,title:p.name,children:p.name})}),s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[s.jsx("div",{className:"rounded-bl-sm rounded-tl-sm py-1 text-xs lg:text-base font-normal","aria-label":`Tình trạng phim: ${S(p.episode_current)}`,children:S(p.episode_current)}),s.jsx("div",{className:"w-[1px] h-4 bg-white/30","aria-hidden":"true"}),s.jsx("p",{className:"line-clamp-1 text-xs lg:text-base font-normal text-[#ffd875]","aria-label":`Tên khác: ${p.origin_name}`,children:p.origin_name})]}),s.jsxs("div",{className:"flex items-center gap-2.5 text-[10px] lg:text-xs font-medium text-white",children:[s.jsxs("div",{className:"flex items-center border border-yellow-300 lg:px-2 px-1 py-0.5 lg:py-1 rounded-md",children:[s.jsx("p",{className:"text-[#f7d54d]",children:"IMDb"}),s.jsx("p",{className:"pl-1",children:0===p.tmdb.vote_average?10:p.tmdb.vote_average.toFixed(1)})]}),s.jsx("div",{className:"bg-white lg:px-2 px-1 py-0.5 lg:py-1 rounded-md text-black font-bold","aria-label":`Ngôn ngữ: ${q(p.lang)}`,children:q(p.lang)}),s.jsx("div",{className:"bg-gradient-to-tr from-[#FFD875] to-white lg:px-2 px-1 py-0.5 lg:py-1 rounded-md text-black font-bold","aria-label":`Chất lượng phim: ${p.quality}`,children:p.quality}),s.jsx("div",{className:"border border-white lg:px-2 px-1 py-0.5 lg:py-1 rounded-md","aria-label":`Năm phát hành: ${p.year}`,children:p.year}),s.jsx("div",{className:"border border-white lg:px-2 px-1 py-0.5 lg:py-1 rounded-md","aria-label":`Thời lượng phim: ${p.time}`,children:p.time})]}),p.category?.length>0&&s.jsx("div",{className:"mt-2 hidden flex-wrap gap-2 lg:flex",children:p.category.map((e=>s.jsx("a",{href:`/the-loai/${e.slug}`,className:"rounded-[4px] bg-[#ffffff14] px-3 py-1 text-[13px] font-medium text-gray-200 transition-colors duration-200 hover:text-yellow-400","aria-label":`Thể loại: ${e.name}`,children:e.name},e.slug)))})]})]})}),s.jsx("button",{type:"button",onClick:()=>x("right"),disabled:a===r.length-1,className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 hidden lg:block px-2 transition-colors duration-500 hover:scale-110","aria-label":"Cuộn phải",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",className:"drop-shadow-[0_0_12px_rgba(255,255,255,0.7)] text-gray-100",children:s.jsxs("g",{fill:"none",fillRule:"evenodd",children:[s.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),s.jsx("path",{fill:"currentColor",d:"M16.06 10.94a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 1 1-2.121-2.122L12.879 12L8.283 7.404a1.5 1.5 0 0 1 2.12-2.122l5.658 5.657Z"})]})})})]})})}export{Ee as default};